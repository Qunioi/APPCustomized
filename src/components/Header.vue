<template>
  <header class="header-wrap">
    <div class="header-logo">
      <a @click.prevent="goHome" href="/"><svg class="header-logo-image" width="112" height="42" viewBox="0 0 112 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M107.16 14.4444C104.038 11.4664 99.8808 9.82044 95.4666 9.82044C91.0523 9.82044 87.1678 11.3592 84.0778 14.1611C83.2912 12.5764 81.7904 11.1601 78.9251 11.1601V18.6855L71.9426 24.8023C71.7419 21.0358 70.1528 17.3228 67.143 14.4444C60.7303 8.32762 50.3127 8.297 43.8438 14.3602V8.21279C43.8438 8.21279 44.3574 0.924741 37.8564 0.924741V20.0559C37.8564 20.0559 43.4906 22.5362 47.9932 18.4712C52.4877 14.4061 58.8041 14.5592 62.9134 18.4712C66.9906 22.3602 67.0307 28.6683 63.0257 32.5956L63.0017 32.6185L62.9134 32.7027C58.7961 36.6224 52.1024 36.6224 47.9851 32.7027C48.2259 32.9324 48.4747 33.1391 48.7315 33.3382C48.4747 33.1391 48.2259 32.9248 47.9851 32.6951L38.4022 23.5544L28.8272 14.4214C25.6008 11.3439 21.3711 9.80513 17.1254 9.80513C13.3773 9.80513 9.62918 11.0224 6.58735 13.4338V8.18982C6.58735 8.18982 7.10101 0.901775 0.600006 0.901775V25.5678C0.600006 29.6099 2.20521 33.652 5.43163 36.7295C11.8765 42.8769 22.3663 42.8846 28.8352 36.7295L34.7263 31.1104C34.7263 31.1104 29.0921 28.6377 24.5895 32.7027C20.095 36.7678 13.7786 36.6147 9.66933 32.7027C7.60666 30.7429 6.58735 28.163 6.58735 25.5831V25.5525C6.58735 23.0338 7.58257 20.5152 9.55695 18.5783L9.86998 18.2874C13.9953 14.5515 20.5445 14.6128 24.5895 18.4712L34.1725 27.6042L43.7474 36.7372C46.9739 39.8147 51.2035 41.3535 55.4412 41.3535C59.6549 41.3535 63.8685 39.83 67.0949 36.7831L78.9171 26.4252V41.43C85.4181 41.43 84.9044 34.142 84.9044 34.142V21.1736L87.9061 18.5477L87.9944 18.4635C89.9849 16.5573 92.6414 15.5161 95.4585 15.5161C98.2756 15.5161 100.932 16.5649 102.923 18.4635C104.913 20.3621 106.013 22.8884 106.013 25.5755V34.8922C106.085 36.7525 106.791 41.4224 112 41.4224V25.5755C112 21.3573 110.274 17.3994 107.152 14.4214L107.16 14.4444Z" fill="url(#paint0_radial_95_418)"/>
        <path d="M79.4227 6.49032L81.8385 8.79463L84.2544 6.49032C85.5867 5.21951 85.5867 3.16017 84.2544 1.88936C82.922 0.618541 80.755 0.618541 79.4227 1.88936C78.0904 3.16017 78.0904 5.2195 79.4227 6.49797V6.49032Z" fill="url(#paint1_radial_95_418)"/>
        <path style="mix-blend-mode:multiply" d="M43.8438 14.3678V8.22046C43.8438 8.22046 44.3574 0.932411 37.8564 0.932411V20.0635H37.9848L43.7394 14.452C43.7394 14.452 43.8116 14.3985 43.8357 14.3678H43.8438Z" fill="url(#paint2_linear_95_418)"/>
        <path style="mix-blend-mode:multiply" d="M78.9251 26.4482V41.453C85.4261 41.453 84.9125 34.1649 84.9125 34.1649V21.1965L83.9413 22.0463L78.9251 26.4482Z" fill="url(#paint3_linear_95_418)"/>
        <path style="mix-blend-mode:multiply" d="M5.56806 14.3295C5.89713 14.0233 6.23421 13.7477 6.58735 13.4721V8.22046C6.58735 8.22046 7.10101 0.932411 0.600006 0.932411V25.5985H0.616061C0.616061 21.6482 2.14903 17.7056 5.23099 14.6587L5.5761 14.3219L5.56806 14.3295Z" fill="url(#paint4_linear_95_418)"/>
        <path style="mix-blend-mode:multiply" d="M67.143 14.4444C60.7303 8.32763 50.3126 8.297 43.8437 14.3602C43.8116 14.3908 43.7795 14.4138 43.7474 14.4444L37.9928 19.9334L37.8644 20.0635C37.8644 20.0635 43.4986 22.5362 48.0012 18.4712C52.4957 14.4061 58.8121 14.5592 62.9214 18.4712C66.9986 22.3602 67.0387 28.6683 63.0338 32.5956L71.9586 24.787C71.7579 21.0205 70.1688 17.3075 67.1591 14.4291L67.143 14.4444Z" fill="url(#paint5_linear_95_418)"/>
        <path style="mix-blend-mode:multiply" d="M84.0778 14.1611C83.2912 12.5764 81.7904 11.1601 78.9251 11.1601V18.6855C78.9251 18.6855 83.9895 14.2453 84.0778 14.1611Z" fill="url(#paint6_linear_95_418)"/>
        <defs>
        <radialGradient id="paint0_radial_95_418" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(57.2471 20.9975) scale(42.2164 40.268)">
        <stop stop-color="#D9281E"/>
        <stop offset="1" stop-color="#C12823"/>
        </radialGradient>
        <radialGradient id="paint1_radial_95_418" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(58.3546 18.4559) scale(57.9715 55.2958)">
        <stop stop-color="#D9281E"/>
        <stop offset="1" stop-color="#C12823"/>
        </radialGradient>
        <linearGradient id="paint2_linear_95_418" x1="40.8581" y1="8.41184" x2="40.8581" y2="19.2061" gradientUnits="userSpaceOnUse">
        <stop stop-color="white"/>
        <stop offset="1" stop-color="#999999"/>
        </linearGradient>
        <linearGradient id="paint3_linear_95_418" x1="82.5448" y1="13.9697" x2="82.0701" y2="27.8508" gradientUnits="userSpaceOnUse">
        <stop stop-color="white"/>
        <stop offset="0.42" stop-color="#999999"/>
        <stop offset="1" stop-color="white"/>
        </linearGradient>
        <linearGradient id="paint4_linear_95_418" x1="3.40105" y1="9.23864" x2="2.57534" y2="19.1287" gradientUnits="userSpaceOnUse">
        <stop stop-color="white"/>
        <stop offset="1" stop-color="#999999"/>
        </linearGradient>
        <linearGradient id="paint5_linear_95_418" x1="54.6466" y1="20.7372" x2="58.7725" y2="32.5607" gradientUnits="userSpaceOnUse">
        <stop stop-color="white"/>
        <stop offset="1" stop-color="#999999"/>
        </linearGradient>
        <linearGradient id="paint6_linear_95_418" x1="81.4774" y1="15.5774" x2="81.5942" y2="21.5412" gradientUnits="userSpaceOnUse">
        <stop stop-color="white"/>
        <stop offset="0.42" stop-color="#999999"/>
        <stop offset="1" stop-color="white"/>
        </linearGradient>
        </defs>
      </svg></a>
    </div>
    <div class="header-navigation">
      <nav class="header-navigation-menu">
        <router-link
          class="header-navigation-item"
          :class="{ 'header-navigation-item--active': currentRoute === '/' }"
          to="/">
          版型选择
        </router-link>
        <router-link
          class="header-navigation-item"
          :class="{ 'header-navigation-item--active': currentRoute === '/icon' }"
          to="/icon">
          ICON样式
        </router-link>
        <router-link
          class="header-navigation-item"
          :class="{ 'header-navigation-item--active': currentRoute === '/game' }"
          to="/game">
          游戏介接
        </router-link>
        <router-link
          class="header-navigation-item"
          :class="{ 'header-navigation-item--active': currentRoute === '/faq' }"
          to="/faq">
          常见问题
        </router-link>
      </nav>
    </div>
    <div class="header-feedback">
      <button class="header-feedback-btn" @click="handleOpenFeedback">
        <svg class="header-feedback-icon" xmlns="http://www.w3.org/2000/svg" width="20px" viewBox="0 0 24 24" fill="#fff"><path d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM20 7.23792L12.0718 14.338L4 7.21594V19H20V7.23792ZM4.51146 5L12.0619 11.662L19.501 5H4.51146Z"></path></svg>
      </button>
      <transition name="fade">
        <span class="header-feedback-tips">问题回馈</span>
      </transition>
    </div>
  </header>
</template>

<script setup lang="ts">
import { computed, inject } from 'vue'
import { useRoute, useRouter } from 'vue-router'

const route = useRoute()
const router = useRouter()

// 计算当前路由路径
const currentRoute = computed(() => {
  if (route.params.number) {
    return '/'
  }
  return route.path
})

const goHome = () => {
  router.push('/')
}

// 注入 openFeedback 方法
const openFeedback = inject<() => void>('openFeedback')

// 处理开启 Feedback
const handleOpenFeedback = () => {
  openFeedback?.()
}
</script>